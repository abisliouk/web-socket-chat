{"ast":null,"code":"'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    utils = require('./utils/event'),\n    IframeTransport = require('./transport/iframe'),\n    InfoReceiverIframe = require('./info-iframe-receiver');\n\nvar debug = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function () {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n    ifr.once('message', function (msg) {\n      if (msg) {\n        var d;\n\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0],\n            rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n\n      self.close();\n    });\n    ifr.once('close', function () {\n      self.emit('finish');\n      self.close();\n    });\n  }; // TODO this seems the same as the 'needBody' from transports\n\n\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function () {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function () {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;","map":{"version":3,"names":["EventEmitter","require","inherits","JSON3","utils","IframeTransport","InfoReceiverIframe","debug","process","env","NODE_ENV","InfoIframe","baseUrl","url","self","call","go","ifr","transportName","once","msg","d","parse","e","emit","close","info","rtt","global","document","body","attachEvent","enabled","prototype","removeAllListeners","module","exports"],"sources":["/home/u.ilyushchanka/IdeaProjects/me/university/spring-react-chat/react-client/node_modules/sockjs-client/lib/info-iframe.js"],"sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n"],"mappings":"AAAA;;AAEA,IAAIA,YAAY,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,YAArC;AAAA,IACIE,QAAQ,GAAGD,OAAO,CAAC,UAAD,CADtB;AAAA,IAEIE,KAAK,GAAGF,OAAO,CAAC,OAAD,CAFnB;AAAA,IAGIG,KAAK,GAAGH,OAAO,CAAC,eAAD,CAHnB;AAAA,IAIII,eAAe,GAAGJ,OAAO,CAAC,oBAAD,CAJ7B;AAAA,IAKIK,kBAAkB,GAAGL,OAAO,CAAC,wBAAD,CALhC;;AAQA,IAAIM,KAAK,GAAG,YAAW,CAAE,CAAzB;;AACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzCH,KAAK,GAAGN,OAAO,CAAC,OAAD,CAAP,CAAiB,2BAAjB,CAAR;AACD;;AAED,SAASU,UAAT,CAAoBC,OAApB,EAA6BC,GAA7B,EAAkC;EAChC,IAAIC,IAAI,GAAG,IAAX;EACAd,YAAY,CAACe,IAAb,CAAkB,IAAlB;;EAEA,IAAIC,EAAE,GAAG,YAAW;IAClB,IAAIC,GAAG,GAAGH,IAAI,CAACG,GAAL,GAAW,IAAIZ,eAAJ,CAAoBC,kBAAkB,CAACY,aAAvC,EAAsDL,GAAtD,EAA2DD,OAA3D,CAArB;IAEAK,GAAG,CAACE,IAAJ,CAAS,SAAT,EAAoB,UAASC,GAAT,EAAc;MAChC,IAAIA,GAAJ,EAAS;QACP,IAAIC,CAAJ;;QACA,IAAI;UACFA,CAAC,GAAGlB,KAAK,CAACmB,KAAN,CAAYF,GAAZ,CAAJ;QACD,CAFD,CAEE,OAAOG,CAAP,EAAU;UACVhB,KAAK,CAAC,UAAD,EAAaa,GAAb,CAAL;UACAN,IAAI,CAACU,IAAL,CAAU,QAAV;UACAV,IAAI,CAACW,KAAL;UACA;QACD;;QAED,IAAIC,IAAI,GAAGL,CAAC,CAAC,CAAD,CAAZ;QAAA,IAAiBM,GAAG,GAAGN,CAAC,CAAC,CAAD,CAAxB;QACAP,IAAI,CAACU,IAAL,CAAU,QAAV,EAAoBE,IAApB,EAA0BC,GAA1B;MACD;;MACDb,IAAI,CAACW,KAAL;IACD,CAhBD;IAkBAR,GAAG,CAACE,IAAJ,CAAS,OAAT,EAAkB,YAAW;MAC3BL,IAAI,CAACU,IAAL,CAAU,QAAV;MACAV,IAAI,CAACW,KAAL;IACD,CAHD;EAID,CAzBD,CAJgC,CA+BhC;;;EACA,IAAI,CAACG,MAAM,CAACC,QAAP,CAAgBC,IAArB,EAA2B;IACzB1B,KAAK,CAAC2B,WAAN,CAAkB,MAAlB,EAA0Bf,EAA1B;EACD,CAFD,MAEO;IACLA,EAAE;EACH;AACF;;AAEDd,QAAQ,CAACS,UAAD,EAAaX,YAAb,CAAR;;AAEAW,UAAU,CAACqB,OAAX,GAAqB,YAAW;EAC9B,OAAO3B,eAAe,CAAC2B,OAAhB,EAAP;AACD,CAFD;;AAIArB,UAAU,CAACsB,SAAX,CAAqBR,KAArB,GAA6B,YAAW;EACtC,IAAI,KAAKR,GAAT,EAAc;IACZ,KAAKA,GAAL,CAASQ,KAAT;EACD;;EACD,KAAKS,kBAAL;EACA,KAAKjB,GAAL,GAAW,IAAX;AACD,CAND;;AAQAkB,MAAM,CAACC,OAAP,GAAiBzB,UAAjB"},"metadata":{},"sourceType":"script"}